<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="import" href="components/iron-flex-layout/classes/iron-flex-layout.html">
    <link rel="import" href="components/paper-button/paper-button.html">
    <link rel="import" href="components/paper-dropdown-menu/paper-dropdown-menu.html">
    <link rel="import" href="components/paper-input/paper-input.html">
    <link rel="import" href="components/paper-item/paper-item.html">
    <link rel="import" href="components/paper-listbox/paper-listbox.html">
    <link rel="import" href="elements/edit-runner.html">
    <style>
        h5 {margin-bottom: -16px;}
    </style>
</head>
<body>
    <div class="layout horizontal flex">
        <!-- Left Column -->
        <div class="flex layout vertical" style="margin-right: 8px;">
            <h5>General Run Info</h5>
            <paper-input type="text" label="Name"></paper-input>
            <paper-input type="text" label="StartTime"></paper-input>
            <!--Removed console dropdown-->
            <paper-input type="text" label="Commentators"></paper-input>
            <paper-input type="text" label="Roles"></paper-input>
            <paper-input type="text" label="Category"></paper-input>
        </div>
        <!--Kasper: Removed runner-->
    </div>

    <script>
        //Kasper: Removed runner, changed info to new info.
        var nameEl = document.querySelector('paper-input[label="Name"]');
        var starttimeEl = document.querySelector('paper-input[label="StartTime"]');
        var commentatorsEl = document.querySelector('paper-input[label="Commentators"]');
        var rolesEl = document.querySelector('paper-input[label="Roles"]');
        var categoryEl = document.querySelector('paper-input[label="Category"]');

        var currentRun = nodecg.Replicant('currentRun');
        currentRun.on('change', function(oldVal, newVal) {
            nameEl.value = newVal.name;
            starttimeEl.value = newVal.starttime;
            commentatorsEl.value = newVal.commentators;
            rolesEl.value = newVal.roles;
            categoryEl.value = newVal.category;
        });

        document.addEventListener('dialog-confirmed', function() {
            currentRun.value.name = nameEl.value;
            currentRun.value.starttime = starttimeEl.value;
            currentRun.value.commentators = commentatorsEl.selected;
            currentRun.value.roles = rolesEl.value;
            currentRun.value.category = categoryEl.value;

            //Removed runners code
        });
    </script>
</body>
</html>
